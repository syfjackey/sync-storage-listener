{"version":3,"sources":["webpack://Storage/webpack/universalModuleDefinition","webpack://Storage/webpack/bootstrap","webpack://Storage/./lib/sync-storage-listener.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","msg","Error","_this","this","_storageType","type","_isTypeValue","result","sessionStorage","prefix","JSON","parse","error","expire","nexpire","_isType","Date","getTime","obj","localStorage","stringify","_setStorageByType","_getCookie","_setCookie","_throwError","reg","RegExp","arr","document","cookie","match","unescape","val","date","toUTCString","escape","keys","vals","ks","vs","_related","length","includes","push","_enable","_backRelated","setItem","removeItem","_checkInit","values","k","setKey","setValue","setExpire","es","forEach","_resolveFn","concat","expires","_isFilterInvalid","oldVal","_sendStorage","Array","fill","_findStorage","entries","_isOwnSession","replace","parseInt","aCookie","split","aCrumb","toString","trim","_handleCallback","_isInit","_initStatus","test","sendType","_winName","_doEventByType","_timer","setTimeout","_receiveBack","_timeout","_isRefeshEmit","nkey","v","_onRequestStorage","_listenerMap","cb","isSyncData","isOnlyEmit","e","_emitListenerCallback","clearTimeout","Promise","res","addEventListener","_onEvent","newValue","listener","listeners","ilistener","callback","flat","Infinity","related","enable","_isLikeListener","toLowerCase","isMayArray","types","isArray","filterInvalid","storageType","timeout","refeshEmit","undefined","_isListener","options","_validOptions","_initStaticData","_initPrefix","_initCallback","_initRelated","_createFindStorageFn","_createSetStorageByType","_initListener","_registerEvent","_questStorage","Vue","init","mountKey","console","warn"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,UAAW,GAAIH,GACI,iBAAZC,QACdA,QAAiB,QAAID,IAErBD,EAAc,QAAIC,IARpB,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,SAIjBhC,EAAoBA,EAAoBiC,EAAI,G,+BClFrD,OAmae,UAnaf,MACE,mBAAmBC,GAAO,MAAM,IAAIC,MAAMD,GAC1C,iCACE,IAAIE,EAAQC,KACZ,MAA0B,mBAAtBA,KAAKC,aACA,SAAUC,EAAMd,EAAKN,GAC1B,IAAKiB,EAAMI,aAAaf,EAAK,UAAW,OAAO,KAC/C,IAAIgB,EAASC,eAAeH,MAASH,EAAMO,UAAUlB,IAAON,GAC5D,IAAMsB,EAASG,KAAKC,MAAMJ,GAAU,MAAOK,IAC3C,OAAOL,GAAU,MAGK,iBAAtBJ,KAAKC,aACA,SAAUC,EAAMd,EAAKN,EAAO4B,GACjC,IAAKX,EAAMI,aAAaf,EAAK,UAAW,OAAO,KAC/C,IAAIuB,EAAWZ,EAAMa,QAAQF,EAAQ,UAA4B,IAATA,EAAgB,GAAK,IAAK,IAAIG,MAAOC,UAA5C,KAC7CC,EAAMC,aAAad,MAASH,EAAMO,UAAUlB,IAAOmB,KAAKU,UAAU,CAAEnC,QAAO4B,OAAQC,KACvF,GAAII,EAAK,CAEP,KADAA,EAAMR,KAAKC,MAAMO,IACRL,QAAUK,EAAIL,QAAS,IAAIG,MAAOC,UAAW,CACpD,IAAIV,EAASW,EAAIjC,MACjB,IAAMsB,EAASG,KAAKC,MAAMJ,GAAU,MAAOK,IAC3C,OAAOL,EAGT,OADAL,EAAMmB,kBAAkB,aAAc9B,EAAK,MACpC,KAET,OAAO2B,GAGe,WAAtBf,KAAKC,aACA,SAAUC,EAAMd,EAAKN,EAAO4B,GACjC,IAAKX,EAAMI,aAAaf,EAAK,UAAW,OAAO,KAC/C,IAAIuB,EAAWZ,EAAMa,QAAQF,EAAQ,UAA4B,IAATA,EAAgB,GAAK,IAAK,IAAIG,MAAOC,UAA5C,KAC7CV,EAAS,KACb,OAAQF,GACN,IAAK,UACHE,EAASL,EAAMoB,cAAcpB,EAAMO,UAAUlB,KAC7C,IAAMgB,EAASG,KAAKC,MAAMJ,GAAU,MAAOK,IAC3C,MACF,IAAK,aACHV,EAAMqB,cAAcrB,EAAMO,UAAUlB,IAAO,IAAK,GAChD,MACF,IAAK,UACHW,EAAMqB,cAAcrB,EAAMO,UAAUlB,IAAON,EAAO6B,GAGtD,OAAOP,QAGXJ,KAAKqB,YAAY,sBAEnB,kBAAkBjC,GAChB,IAAIkC,EAAM,IAAIC,OAAO,QAAUnC,EAAM,iBACjCoC,EAAMC,SAASC,OAAOC,MAAML,GAChC,OAAOE,EAAMI,SAASJ,EAAI,IAAM,KAElC,kBAAkBpC,EAAKyC,EAAKnB,GAC1B,GAAIA,EAAQ,CACV,IAAIoB,EAAO,IAAIjB,KAAKH,GAAQqB,cAC5BN,SAASC,UAAYtC,KAAO4C,OAAOH,cAAgBC,SAEnDL,SAASC,UAAYtC,KAAO4C,OAAOH,KAGvC,oBAAoBI,EAAMC,GACxB,IAAIC,EAAK,GACLC,EAAK,GACT,GAA6B,IAAzBpC,KAAKqC,SAASC,OAChBH,EAAKF,EACLG,EAAKF,OAEL,IAAK,IAAIrE,EAAI,EAAGA,EAAIoE,EAAKK,OAAQzE,IAC3BmC,KAAKqC,SAASE,SAASN,EAAKpE,MAC9BsE,EAAGK,KAAKP,EAAKpE,IACbuE,EAAGI,KAAKN,EAAKrE,KAInB,MAAO,CAACsE,EAAIC,GAEd,oBAAoBlC,EAAM+B,EAAMC,GAC9B,IAAKlC,KAAKyC,QAAS,OACnB,IAAKN,EAAIC,GAAMpC,KAAK0C,aAAaT,EAAMC,GACvC,GAAa,mBAAThC,GAAsC,mBAATA,GAA6BiC,EAAGG,OAAS,EAAG,CAC3E,IAAIlD,KAASY,KAAKM,UAAUJ,KAAQK,KAAKU,UAAUkB,KACnDnB,aAAa2B,QAAQvD,EAAKmB,KAAKU,UAAUmB,IACzCpB,aAAa4B,WAAWxD,IAG5B,eAAeA,GAEb,GADAY,KAAK6C,cACA7C,KAAKG,aAAaf,EAAK,UAAU,GAAO,OAAOY,KAAKqB,YAAY,iCACrE,GAAIrB,KAAKG,aAAaf,EAAK,UAAa,OAAOY,KAAKkB,kBAAkB,UAAW9B,EAAK,MACtF,IAAI0D,EAAS,GACb,IAAK,IAAIjF,EAAI,EAAGA,EAAIuB,EAAIkD,OAAQzE,IAAK,CACnC,MAAMkF,EAAI3D,EAAIvB,GACdiF,EAAON,KAAKxC,KAAKkB,kBAAkB,UAAW6B,EAAG,OAEnD,OAAOD,EAET,kBAAkBE,EAAQC,EAAUC,GAClC,GAAIlD,KAAKG,aAAa6C,EAAQ,UAAW,CACvC,IAAI,IAAE5D,EAAG,MAAEN,EAAK,OAAE4B,GAAWsC,EAI7B,OAHKhD,KAAKG,aAAarB,EAAO,YAC5BA,EAAQyB,KAAKU,UAAUnC,IAElB,CAAC,CAACM,GAAM,CAACN,GAAQ,CAAC4B,IAE3B,GAAIV,KAAKG,aAAa6C,EAAQ,UAC5B,MAAO,CAAC,CAACA,GAAS,CAACC,GAAW,CAACC,IAEjC,GAAIlD,KAAKG,aAAa6C,EAAQ,SAAU,CACtC,IAAIb,EAAK,GACLC,EAAK,GACLe,EAAK,GAOT,OANAH,EAAOI,QAAQrC,IACb,IAAK3B,EAAKN,EAAO4B,GAAUV,KAAKqD,WAAWtC,GAC3CoB,EAAKA,EAAGmB,OAAOlE,GACfgD,EAAKA,EAAGkB,OAAOxE,GACfqE,EAAKA,EAAGG,OAAO5C,KAEV,CAACyB,EAAIC,EAAIe,IAGpB,eAAeH,EAAQC,EAAUC,GAE/B,GADAlD,KAAK6C,cACC7C,KAAKG,aAAa6C,EAAQ,YAAahD,KAAKG,aAAa6C,EAAQ,UAAU,GAAQ,OAAOhD,KAAKqB,YAAY,wCACjH,IAAKY,EAAMa,EAAQS,GAAWvD,KAAKqD,WAAWL,EAAQC,EAAUC,GAChE,MAAMd,EAAK,GACLD,EAAK,GACX,IAAK,IAAItE,EAAI,EAAGA,EAAIoE,EAAKK,OAAQzE,IAAK,CACpC,IAAIgE,EAA2B,iBAAdiB,EAAOjF,GAAkBiF,EAAOjF,GAAK0C,KAAKU,UAAU6B,EAAOjF,IAC5E,GAAImC,KAAKwD,iBAAkB,CACzB,IAAIC,EAASzD,KAAKkB,kBAAkB,UAAWe,EAAKpE,GAAI,MAExD,GAAIgE,KADJ4B,EAA2B,iBAAXA,EAAsBA,EAASlD,KAAKU,UAAUwC,IAE5D,SAGJtB,EAAGK,KAAKP,EAAKpE,IACbuE,EAAGI,KAAKX,GACR7B,KAAKkB,kBAAkB,UAAWe,EAAKpE,GAAIgE,EAAK0B,EAAQ1F,IAE1DsE,EAAGG,OAAS,GAAKtC,KAAK0D,aAAa,aAAcvB,EAAIC,GAEvD,kBAAkBhD,GAEhB,GADAY,KAAK6C,cACA7C,KAAKG,aAAaf,EAAK,UAAU,GAAO,OAAOY,KAAKqB,YAAY,iCACrE,IAAIY,EAAOjC,KAAKG,aAAaf,EAAK,UAAY,CAACA,GAAOA,EAClD+C,EAAK,GACT,IAAK,IAAItE,EAAI,EAAGA,EAAIoE,EAAKK,OAAQzE,IAC1BmC,KAAKwD,kBAAmE,OAA/CxD,KAAKkB,kBAAkB,UAAWe,EAAKpE,MACnEsE,EAAGK,KAAKP,EAAKpE,IACbmC,KAAKkB,kBAAkB,aAAce,EAAKpE,GAAI,OAG9CsE,EAAGG,OAAS,GAAKtC,KAAK0D,aAAa,gBAAiBvB,EAAIwB,MAAMxB,EAAGG,QAAQsB,KAAK,OAEpF,eACE5D,KAAK6C,aACL,IAAKZ,GAAQjC,KAAK6D,eAClB,IAAK,MAAMzE,KAAO6C,EAChBjC,KAAKkB,kBAAkB,aAAc9B,EAAK,OAExC6C,EAAKK,OAAS,IAAMtC,KAAKwD,mBAAoBxD,KAAK0D,aAAa,gBAAiBzB,EAAM0B,MAAM1B,EAAKK,QAAQsB,KAAK,OAEpH,8BACE,IAAI7D,EAAQC,KACZ,MAAMsB,EAAM,IAAIC,WAAWvB,KAAKM,WAChC,MAA0B,mBAAtBN,KAAKC,aACA,WACL,IAAIgC,EAAO,GACPC,EAAO,GACX,IAAK,MAAO9C,EAAKN,KAAUP,OAAOuF,QAAQzD,gBACxC,GAAIN,EAAMgE,cAAc3E,GAAM,CAC5B,IAAI2D,EAAI3D,EAAI4E,QAAQ1C,EAAK,IACzBW,EAAKO,KAAKO,GACVb,EAAKM,KAAK1D,GAGd,MAAO,CAACmD,EAAMC,IAGQ,iBAAtBlC,KAAKC,aACA,WACL,IAAIgC,EAAO,GACPC,EAAO,GACX,IAAK,MAAO9C,EAAKN,KAAUP,OAAOuF,QAAQ9C,cACxC,GAAIjB,EAAMgE,cAAc3E,GAAM,CAC5B,IAAI2D,EAAI3D,EAAI4E,QAAQ1C,EAAK,IACrBO,EAAMtB,KAAKC,MAAM1B,IAChB+C,EAAI0B,UAAW,IAAI1C,MAAOC,UAAYmD,SAASpC,EAAI0B,QAAS,KAC/DrB,EAAKM,KAAKX,EAAI/C,OACdmD,EAAKO,KAAKO,IAEVhD,EAAMmB,kBAAkB,aAAc9B,EAAK,MAIjD,MAAO,CAAC6C,EAAMC,IAGQ,WAAtBlC,KAAKC,aACA,WACL,IAAIgC,EAAO,GACPC,EAAO,GACPgC,EAAUzC,SAASC,OAAOyC,MAAM,KACpC,IAAK,IAAItG,EAAI,EAAGA,EAAIqG,EAAQ5B,OAAQzE,IAAK,CACvC,IAAIuG,EAASF,EAAQrG,GAAGsG,MAAM,KAC1B/E,EAAMgF,EAAO,GAAGC,WAAWC,OAC/B,GAAIvE,EAAMgE,cAAc3E,GAAM,CAC5B,IAAI2D,EAAI3D,EAAI4E,QAAQ1C,EAAK,IACzBW,EAAKO,KAAKO,GACVb,EAAKM,KAAK4B,EAAO,KAGrB,MAAO,CAACnC,EAAMC,SAGlBlC,KAAKqB,YAAY,sBAEnB,2BACE,IAAKY,EAAMC,GAAQlC,KAAK6D,eACxB7D,KAAK0D,aAAa,iBAAkBzB,EAAMC,GAC1ClC,KAAKuE,gBAAgB,GAAI,GAAI,UAAWvE,MAG1C,oBACE,IAAKA,KAAKwE,UAAW,OAAOxE,KAAKqB,YAAY,wCAE/C,iBACE,MAA4B,SAArBrB,KAAKyE,YAEd,qBAAqBrF,GAEnB,OADqB,IAAImC,WAAWvB,KAAKM,WACrBoE,KAAKtF,GAE3B,iBAAiBA,GACf,IAAKA,EAAK,OACV,MAAMkC,EAAM,IAAIC,WAAWvB,KAAKM,OAAS,sBACnCqE,EAAWvF,EAAIuC,MAAML,GAC3B,OAAOqD,GAAYA,EAAS,GAE9B,uBACE,GAAIlH,OAAOW,OAAS4B,KAAK4E,SAAU,CACjC,GAA0B,mBAAtB5E,KAAKC,aAAmC,CAC1C,IAAKgC,EAAMC,GAAQlC,KAAK0C,gBAAgB1C,KAAK6D,gBAE7C,YADA7D,KAAK6E,eAAe,MAAO5C,EAAMC,GAAM,GAGzClC,KAAK0D,aAAa,iBAAkB,GAAI,IACxC1D,KAAK8E,OAASC,WAAW,KACvBtH,OAAOW,KAAO4B,KAAK4E,SACnB5E,KAAKgF,cAAgBhF,KAAKgF,gBACzBhF,KAAKiF,eAER,GAAIjF,KAAKkF,cAAe,CACtB,IAAKjD,EAAMC,GAAQlC,KAAK0C,gBAAgB1C,KAAK6D,gBAC7C7D,KAAK6E,eAAe,MAAO5C,EAAMC,GAAM,GAAO,IAIpD,gBAAgB9C,EAAKyC,GACnB,IAAKzC,EAAK,OACV,MAAMkC,EAAM,IAAIC,WAAWvB,KAAKM,OAAS,sBACzC,IAAIqE,EAAWvF,EAAIuC,MAAML,GAEzB,KADAqD,EAAWA,GAAYA,EAAS,KAC5B,MAAa9C,EAAmC,OACpD,IAAIsD,EAAO/F,EAAI4E,QAAQ1C,EAAK,IAC5B,MAAMyB,EAAIxC,KAAKC,MAAM2E,GACfC,EAAI7E,KAAKC,MAAMqB,GACrB,OAAQ8C,GACN,IAAK,gBACH3E,KAAK6E,eAAe,SAAU9B,EAAGqC,GAAG,GACpC,MACF,IAAK,aACHpF,KAAK6E,eAAe,MAAO9B,EAAGqC,GAAG,GACjC,MACF,IAAK,iBACHpF,KAAKqF,oBACL,MACF,IAAK,iBACHrF,KAAK6E,eAAe,MAAO9B,EAAGqC,GAAG,IAIvC,6BAA6BhG,EAAKyC,EAAK3B,GACrCF,KAAKsF,aAAalG,IAAQY,KAAKsF,aAAalG,GAAKgE,QAAQmC,IACvDA,EAAG1D,EAAK3B,EAAMd,EAAKY,QAGvB,sBAAsBE,EAAM+B,EAAMC,EAAMsD,EAAYC,GAAa,GAC/D,IAAIrD,EAAK,GACT,IAAK,IAAIvE,EAAI,EAAGA,EAAIoE,EAAKK,OAAQzE,IAAK,EACnC4H,GAAoC,mBAAtBzF,KAAKC,eAA+C,WAATC,EAAoBF,KAAKkB,kBAAkB,aAAce,EAAKpE,GAAI,MAAQmC,KAAKkB,kBAAkB,UAAWe,EAAKpE,GAAIqE,EAAKrE,KACpL,IAAIuH,EAAIlD,EAAKrE,GACb,IAAMuH,EAAI7E,KAAKC,MAAM0B,EAAKrE,IAAM,MAAO6H,IACvC1F,KAAK2F,sBAAsB1D,EAAKpE,GAAIuH,EAAGlF,GACvCkC,EAAGI,KAAK4C,GAEVpF,KAAKuE,gBAAgBtC,EAAMG,EAAIlC,EAAMF,MACjCwF,IACF/H,OAAOW,KAAO4B,KAAK4E,SACnBgB,aAAa5F,KAAK8E,QAClB9E,KAAKgF,cAAgBhF,KAAKgF,gBAG9B,eAEE,OADAhF,KAAK6C,aACE,IAAIgD,QAASC,IACjB9F,KAAKyC,SAAWhF,OAAOW,OAAS4B,KAAK4E,SAAmB5E,KAAKgF,aAAe,IAAMc,IAAlCA,MAGrD,wBACErI,OAAOsI,iBAAiB,UAAYL,IAClC1F,KAAKgG,SAASN,EAAEtG,IAAKsG,EAAEO,YAG3B,qBAAqBC,GAEnB,GADAlG,KAAKsF,aAAe,IACfY,EAAU,OACf,IAAIC,EAAYnG,KAAKG,aAAa+F,EAAU,UAAY,CAACA,GAAYA,EACrE,IAAK,IAAIrI,EAAI,EAAGA,EAAIsI,EAAU7D,OAAQzE,IAAK,CACzC,MAAMuI,EAAYD,EAAUtI,GAC5B,IAAI0H,EAAKvF,KAAKG,aAAaiG,EAAUC,SAAU,YAAc,CAACD,EAAUC,UAAYD,EAAUC,SAASC,KAAKC,KACxGnH,EAAMgH,EAAUhH,IAChBY,KAAKsF,aAAalG,GACpBY,KAAKsF,aAAalG,GAAKkE,OAAOiC,GAE9BvF,KAAKsF,aAAalG,GAAOmG,GAI/B,oBAAoBiB,EAAU,GAAIC,GAChCzG,KAAKyC,QAAUgE,EACfzG,KAAKqC,SAAWrC,KAAKG,aAAaqG,EAAS,UAAY,CAACA,GAAW,IAAIA,GAEzE,uBAAuB1I,GACrB,QAASA,GAAkB,iBAANA,GAAkBkC,KAAKG,aAAarC,EAAEsB,IAAK,YAAcY,KAAKG,aAAarC,EAAEuI,SAAU,aAAerG,KAAKG,aAAarC,EAAEuI,SAAU,YAAY,IAEvK,mBAAmBH,GACjB,GAAIlG,KAAKG,aAAa+F,EAAU,UAAW,OAAOlG,KAAK0G,gBAAgBR,GACvE,GAAIlG,KAAKG,aAAa+F,EAAU,UAAYA,EAAS5D,OAAS,EAAG,CAC/D,IAAK,IAAIzE,EAAI,EAAGA,EAAIqI,EAAS5D,OAAQzE,IAAK,CACxC,MAAMC,EAAIoI,EAASrI,GACnB,IAAKmC,KAAK0G,gBAAgB5I,GAAI,OAAO,EAEvC,OAAO,EAET,OAAO,EAET,eAAe+D,EAAK3B,GAClB,OAAOA,EAAKyG,gBAAkBpI,OAAOkB,UAAU4E,SAASrG,KAAK6D,GAAKsC,MAAM,KAAK,GAAGH,QAAQ,IAAK,IAAI2C,cAEnG,oBAAoB9E,EAAK3B,EAAM0G,GAAa,GAC1C,IAAK1G,EAAM,OAAO,EAClB,IAAI2G,EAAQ3G,EAAKiE,MAAM,KACvB,IAAK,IAAItG,EAAI,EAAGA,EAAIgJ,EAAMvE,OAAQzE,IAChC,GAAImC,KAAKY,QAAQiB,EAAKgF,EAAMhJ,IAAK,OAAO,EAE1C,GAAI+I,GAAcjD,MAAMmD,QAAQjF,IAAQA,EAAIS,OAAS,EAAG,CACtD,IAAK,IAAIzE,EAAI,EAAGA,EAAIgE,EAAIS,OAAQzE,IAC9B,IAAKmC,KAAKG,aAAa0B,EAAIhE,GAAIqC,GAAM,GAAQ,OAAO,EAEtD,OAAO,EAET,OAAO,EAET,sBAAqB,OAAEI,EAAS,MAAK,cAAEyG,GAAgB,EAAI,SAAEV,EAAW,KAAM,MAAI,SAAEH,EAAQ,QAAEM,EAAO,OAAEC,GAAS,EAAI,YAAEO,EAAc,iBAAgB,QAAEC,EAAU,GAAE,WAAEC,GAAa,IAC/K,OAAKlH,KAAKG,aAAaG,EAAQ,eACf6G,IAAZX,GAA0BxG,KAAKG,aAAaqG,EAAS,UAAU,GAC9DxG,KAAKG,aAAakG,EAAU,YAC7BH,IAAalG,KAAKoH,YAAYlB,GAAkBlG,KAAKqB,YAAY,qEAChErB,KAAKG,aAAasG,EAAQ,YACX,mBAAhBO,GAAoD,iBAAhBA,GAAkD,WAAhBA,GAA0BhH,KAAKqB,YAAY,oDAC/G,WAAWqD,KAAKuC,IAAWjH,KAAKqB,YAAY,iBAC7CrB,KAAKG,aAAa+G,EAAY,WAC9BlH,KAAKG,aAAa4G,EAAe,WAC/B,CAAEzG,SAAQ+F,WAAUH,WAAUM,UAASC,SAAQO,cAAaC,UAASC,aAAYH,iBAD/B/G,KAAKqB,YAAY,6BADpBrB,KAAKqB,YAAY,2BAHrBrB,KAAKqB,YAAY,sBAFdrB,KAAKqB,YAAY,yBADWrB,KAAKqB,YAAY,oCADjDrB,KAAKqB,YAAY,qBAWpE,yBACErB,KAAKyE,YAAc,OACnBzE,KAAK8E,OAAS,KACd9E,KAAK4E,SAAW,gBAElB,mBAAmBtE,GACjBN,KAAKM,OAASA,EAEhB,qBAAqB+F,GACnBrG,KAAKuE,gBAAkB8B,EAEzB,YAAYgB,GACV,GAAyB,SAArBrH,KAAKyE,YAAwB,OAAOzE,KAAKqB,YAAY,iBACzD,IAAI,OAAEf,EAAM,SAAE+F,EAAQ,SAAEH,EAAQ,QAAEM,EAAO,OAAEC,EAAM,YAAEO,EAAW,QAAEC,EAAO,WAAEC,EAAU,cAAEH,GAAkB/G,KAAKsH,cAAcD,GAAW,IACrIrH,KAAKuH,kBACLvH,KAAKiF,SAAWgC,EAChBjH,KAAKC,aAAe+G,EACpBhH,KAAKkF,cAAgBgC,EACrBlH,KAAKwD,iBAAmBuD,EACxB/G,KAAKwH,YAAYlH,GACjBN,KAAKyH,cAAcpB,GACnBrG,KAAK0H,aAAalB,EAASC,GAC3BzG,KAAK6D,aAAe7D,KAAK2H,uBACzB3H,KAAKkB,kBAAoBlB,KAAK4H,0BAC1BnB,IACFzG,KAAK6H,cAAc3B,GACnBlG,KAAK8H,iBACL9H,KAAK+H,iBAGT,eAAeC,EAAKX,EAAU,IAC5BrH,KAAKiI,KAAKZ,GACV,IAAIa,EAAWb,EAAQa,UAAwC,iBAArBb,EAAQa,SAAwBb,EAAQa,SAAW,WACzFF,EAAIvI,UAAUyI,IAAWC,QAAQC,QAAQF,iBAC7CF,EAAIvI,UAAUyI,GAAYlI,U","file":"sync-storage-listener.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Storage\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Storage\"] = factory();\n\telse\n\t\troot[\"Storage\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","class Storage {\r\n  static _throwError(msg) { throw new Error(msg); }\r\n  static _createSetStorageByType() {\r\n    let _this = this\r\n    if (this._storageType === 'sessionStorage') {\r\n      return function (type, key, value) {\r\n        if (!_this._isTypeValue(key, 'string')) return null\r\n        let result = sessionStorage[type](`${_this.prefix}_${key}`, value)\r\n        try { result = JSON.parse(result) } catch (error) { }\r\n        return result || null\r\n      }\r\n    }\r\n    if (this._storageType === 'localStorage') {\r\n      return function (type, key, value, expire) {\r\n        if (!_this._isTypeValue(key, 'string')) return null\r\n        let nexpire = !_this._isType(expire, 'number') ? null : expire * 1000 * 60 * 60 + new Date().getTime();\r\n        let obj = localStorage[type](`${_this.prefix}_${key}`, JSON.stringify({ value, expire: nexpire }))\r\n        if (obj) {\r\n          obj = JSON.parse(obj)\r\n          if (!obj.expire || obj.expire > new Date().getTime()) {\r\n            let result = obj.value\r\n            try { result = JSON.parse(result) } catch (error) { }\r\n            return result\r\n          }\r\n          _this._setStorageByType('removeItem', key, null)\r\n          return null\r\n        }\r\n        return obj\r\n      };\r\n    }\r\n    if (this._storageType === 'cookie') {\r\n      return function (type, key, value, expire) {\r\n        if (!_this._isTypeValue(key, 'string')) return null\r\n        let nexpire = !_this._isType(expire, 'number') ? null : expire * 1000 * 60 * 60 + new Date().getTime();\r\n        let result = null\r\n        switch (type) {\r\n          case 'getItem':\r\n            result = _this._getCookie(`${_this.prefix}_${key}`)\r\n            try { result = JSON.parse(result) } catch (error) { }\r\n            break\r\n          case 'removeItem':\r\n            _this._setCookie(`${_this.prefix}_${key}`, '', -1)\r\n            break\r\n          case 'setItem':\r\n            _this._setCookie(`${_this.prefix}_${key}`, value, nexpire)\r\n            break\r\n        }\r\n        return result\r\n      }\r\n    }\r\n    this._throwError('storageType类型解析失败!')\r\n  }\r\n  static _getCookie(key) {\r\n    let reg = new RegExp(\"(^| )\" + key + \"=([^;]*)(;|$)\");\r\n    let arr = document.cookie.match(reg)\r\n    return arr ? unescape(arr[2]) : null\r\n  }\r\n  static _setCookie(key, val, expire) {\r\n    if (expire) {\r\n      let date = new Date(expire).toUTCString();\r\n      document.cookie = `${key}=${escape(val)};expires=${date}`;\r\n    } else {\r\n      document.cookie = `${key}=${escape(val)}`\r\n    }\r\n  }\r\n  static _backRelated(keys, vals) {\r\n    let ks = []\r\n    let vs = []\r\n    if (this._related.length === 0) {\r\n      ks = keys\r\n      vs = vals\r\n    } else {\r\n      for (let i = 0; i < keys.length; i++) {\r\n        if (this._related.includes(keys[i])) {\r\n          ks.push(keys[i])\r\n          vs.push(vals[i])\r\n        }\r\n      }\r\n    }\r\n    return [ks, vs]\r\n  }\r\n  static _sendStorage(type, keys, vals) {\r\n    if (!this._enable) return\r\n    let [ks, vs] = this._backRelated(keys, vals)\r\n    if (type === 'requestStorage' || type === 'receiveStorage' || ks.length > 0) {\r\n      let key = `${this.prefix}_${type}_${JSON.stringify(ks)}`\r\n      localStorage.setItem(key, JSON.stringify(vs))\r\n      localStorage.removeItem(key)\r\n    }\r\n  }\r\n  static getItem(key) {\r\n    this._checkInit()\r\n    if (!this._isTypeValue(key, 'string', true)) return this._throwError('key只能是String|Array<String>类型!')\r\n    if (this._isTypeValue(key, 'string')) { return this._setStorageByType('getItem', key, null) }\r\n    let values = []\r\n    for (let i = 0; i < key.length; i++) {\r\n      const k = key[i];\r\n      values.push(this._setStorageByType('getItem', k, null))\r\n    }\r\n    return values\r\n  }\r\n  static _resolveFn(setKey, setValue, setExpire) {\r\n    if (this._isTypeValue(setKey, 'object')) {\r\n      let { key, value, expire } = setKey\r\n      if (!this._isTypeValue(value, 'string')) {\r\n        value = JSON.stringify(value)\r\n      }\r\n      return [[key], [value], [expire]]\r\n    }\r\n    if (this._isTypeValue(setKey, 'string')) {\r\n      return [[setKey], [setValue], [setExpire]]\r\n    }\r\n    if (this._isTypeValue(setKey, 'array')) {\r\n      let ks = []\r\n      let vs = []\r\n      let es = []\r\n      setKey.forEach(obj => {\r\n        let [key, value, expire] = this._resolveFn(obj)\r\n        ks = ks.concat(key)\r\n        vs = vs.concat(value)\r\n        es = es.concat(expire)\r\n      })\r\n      return [ks, vs, es]\r\n    }\r\n  }\r\n  static setItem(setKey, setValue, setExpire) {\r\n    this._checkInit()\r\n    if (!(this._isTypeValue(setKey, 'string') || this._isTypeValue(setKey, 'object', true))) return this._throwError('key只能是String|object|Array<object>类型!')\r\n    let [keys, values, expires] = this._resolveFn(setKey, setValue, setExpire)\r\n    const vs = []\r\n    const ks = []\r\n    for (let i = 0; i < keys.length; i++) {\r\n      let val = typeof values[i] === 'string' ? values[i] : JSON.stringify(values[i])\r\n      if (this._isFilterInvalid) {\r\n        let oldVal = this._setStorageByType('getItem', keys[i], null)\r\n        oldVal = typeof oldVal === 'string' ? oldVal : JSON.stringify(oldVal)\r\n        if (val === oldVal) {\r\n          continue\r\n        }\r\n      }\r\n      ks.push(keys[i])\r\n      vs.push(val)\r\n      this._setStorageByType('setItem', keys[i], val, expires[i])\r\n    }\r\n    ks.length > 0 && this._sendStorage('setStorage', ks, vs)\r\n  }\r\n  static removeItem(key) {\r\n    this._checkInit()\r\n    if (!this._isTypeValue(key, 'string', true)) return this._throwError('key只能是String|Array<String>类型!')\r\n    let keys = this._isTypeValue(key, 'string') ? [key] : key\r\n    let ks = []\r\n    for (let i = 0; i < keys.length; i++) {\r\n      if (!this._isFilterInvalid || this._setStorageByType('getItem', keys[i]) !== null) {\r\n        ks.push(keys[i])\r\n        this._setStorageByType('removeItem', keys[i], null)\r\n      }\r\n    }\r\n    if (ks.length > 0) { this._sendStorage('removeStorage', ks, Array(ks.length).fill(null)) }\r\n  }\r\n  static clear() {\r\n    this._checkInit()\r\n    let [keys] = this._findStorage()\r\n    for (const key of keys) {\r\n      this._setStorageByType('removeItem', key, null)\r\n    }\r\n    if (keys.length > 0 || !this._isFilterInvalid) { this._sendStorage('removeStorage', keys, Array(keys.length).fill(null)) }\r\n  }\r\n  static _createFindStorageFn() {\r\n    let _this = this\r\n    const reg = new RegExp(`^${this.prefix}_`)\r\n    if (this._storageType === 'sessionStorage') {\r\n      return function () {\r\n        let keys = []\r\n        let vals = []\r\n        for (const [key, value] of Object.entries(sessionStorage)) {\r\n          if (_this._isOwnSession(key)) {\r\n            let k = key.replace(reg, ``)\r\n            keys.push(k)\r\n            vals.push(value)\r\n          }\r\n        }\r\n        return [keys, vals]\r\n      }\r\n    }\r\n    if (this._storageType === 'localStorage') {\r\n      return function () {\r\n        let keys = []\r\n        let vals = []\r\n        for (const [key, value] of Object.entries(localStorage)) {\r\n          if (_this._isOwnSession(key)) {\r\n            let k = key.replace(reg, ``)\r\n            let val = JSON.parse(value)\r\n            if (!val.expires || new Date().getTime() > parseInt(val.expires, 10)) {\r\n              vals.push(val.value)\r\n              keys.push(k)\r\n            } else {\r\n              _this._setStorageByType('removeItem', key, null)\r\n            }\r\n          }\r\n        }\r\n        return [keys, vals]\r\n      }\r\n    }\r\n    if (this._storageType === 'cookie') {\r\n      return function () {\r\n        let keys = []\r\n        let vals = []\r\n        let aCookie = document.cookie.split(\";\")\r\n        for (let i = 0; i < aCookie.length; i++) {\r\n          let aCrumb = aCookie[i].split(\"=\");\r\n          let key = aCrumb[0].toString().trim()\r\n          if (_this._isOwnSession(key)) {\r\n            let k = key.replace(reg, ``)\r\n            keys.push(k)\r\n            vals.push(aCrumb[1])\r\n          }\r\n        }\r\n        return [keys, vals]\r\n      }\r\n    }\r\n    this._throwError('storageType类型解析失败!')\r\n  }\r\n  static _onRequestStorage() {\r\n    let [keys, vals] = this._findStorage()\r\n    this._sendStorage('receiveStorage', keys, vals)\r\n    this._handleCallback([], [], 'request', this)\r\n    return\r\n  }\r\n  static _checkInit() {\r\n    if (!this._isInit()) return this._throwError('使用Storage前,请先调用init初始化或者使用Vue.use注册!')\r\n  }\r\n  static _isInit() {\r\n    return this._initStatus === 'INIT'\r\n  }\r\n  static _isOwnSession(key) {\r\n    const isSetsession = new RegExp(`^${this.prefix}_`);\r\n    return isSetsession.test(key)\r\n  }\r\n  static _sendType(key) {\r\n    if (!key) return\r\n    const reg = new RegExp(`^${this.prefix + '_([^_]+Storage)_'}`)\r\n    const sendType = key.match(reg);\r\n    return sendType && sendType[1]\r\n  }\r\n  static _questStorage() {\r\n    if (window.name !== this._winName) {\r\n      if (this._storageType !== 'sessionStorage') {\r\n        let [keys, vals] = this._backRelated(...this._findStorage())\r\n        this._doEventByType('set', keys, vals, true)\r\n        return\r\n      }\r\n      this._sendStorage('requestStorage', [], [])\r\n      this._timer = setTimeout(() => {\r\n        window.name = this._winName\r\n        this._receiveBack && this._receiveBack()\r\n      }, this._timeout);\r\n    } else {\r\n      if (this._isRefeshEmit) {\r\n        let [keys, vals] = this._backRelated(...this._findStorage())\r\n        this._doEventByType('set', keys, vals, false, true)\r\n      }\r\n    }\r\n  }\r\n  static _onEvent(key, val) {\r\n    if (!key) return\r\n    const reg = new RegExp(`^${this.prefix + '_([^_]+Storage)_'}`)\r\n    let sendType = key.match(reg);\r\n    sendType = sendType && sendType[1]\r\n    if (!sendType || val === null || val === undefined) return\r\n    let nkey = key.replace(reg, '')\r\n    const k = JSON.parse(nkey)\r\n    const v = JSON.parse(val)\r\n    switch (sendType) {\r\n      case 'removeStorage':\r\n        this._doEventByType('remove', k, v, false)\r\n        break;\r\n      case 'setStorage':\r\n        this._doEventByType('set', k, v, false)\r\n        break;\r\n      case 'requestStorage':\r\n        this._onRequestStorage()\r\n        break;\r\n      case 'receiveStorage':\r\n        this._doEventByType('set', k, v, true)\r\n        break;\r\n    }\r\n  }\r\n  static _emitListenerCallback(key, val, type) {\r\n    this._listenerMap[key] && this._listenerMap[key].forEach(cb => {\r\n      cb(val, type, key, this)\r\n    });\r\n  }\r\n  static _doEventByType(type, keys, vals, isSyncData, isOnlyEmit = false) {\r\n    let vs = []\r\n    for (let i = 0; i < keys.length; i++) {\r\n      !isOnlyEmit && this._storageType === 'sessionStorage' && (type === 'remove' ? this._setStorageByType('removeItem', keys[i], null) : this._setStorageByType('setItem', keys[i], vals[i]))\r\n      let v = vals[i]\r\n      try { v = JSON.parse(vals[i]) } catch (e) { }\r\n      this._emitListenerCallback(keys[i], v, type)\r\n      vs.push(v)\r\n    }\r\n    this._handleCallback(keys, vs, type, this)\r\n    if (isSyncData) {\r\n      window.name = this._winName\r\n      clearTimeout(this._timer)\r\n      this._receiveBack && this._receiveBack()\r\n    }\r\n  }\r\n  static ready() {\r\n    this._checkInit()\r\n    return new Promise((res) => {\r\n      !this._enable || window.name === this._winName ? res() : this._receiveBack = () => res();\r\n    });\r\n  }\r\n  static _registerEvent() {\r\n    window.addEventListener('storage', (e) => {\r\n      this._onEvent(e.key, e.newValue)\r\n    });\r\n  }\r\n  static _initListener(listener) {\r\n    this._listenerMap = {}\r\n    if (!listener) return\r\n    let listeners = this._isTypeValue(listener, 'object') ? [listener] : listener\r\n    for (let i = 0; i < listeners.length; i++) {\r\n      const ilistener = listeners[i];\r\n      let cb = this._isTypeValue(ilistener.callback, 'function') ? [ilistener.callback] : ilistener.callback.flat(Infinity)\r\n      let key = ilistener.key\r\n      if (this._listenerMap[key]) {\r\n        this._listenerMap[key].concat(cb)\r\n      } else {\r\n        this._listenerMap[key] = cb\r\n      }\r\n    }\r\n  }\r\n  static _initRelated(related = [], enable) {\r\n    this._enable = enable\r\n    this._related = this._isTypeValue(related, 'string') ? [related] : [...related]\r\n  }\r\n  static _isLikeListener(l) {\r\n    return !!l && typeof l === 'object' && this._isTypeValue(l.key, 'string') && (this._isTypeValue(l.callback, 'function') || this._isTypeValue(l.callback, 'function', true))\r\n  }\r\n  static _isListener(listener) {\r\n    if (this._isTypeValue(listener, 'object')) return this._isLikeListener(listener)\r\n    if (this._isTypeValue(listener, 'array') && listener.length > 0) {\r\n      for (let i = 0; i < listener.length; i++) {\r\n        const l = listener[i];\r\n        if (!this._isLikeListener(l)) return false\r\n      }\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  static _isType(val, type) {\r\n    return type.toLowerCase() === Object.prototype.toString.call(val).split(' ')[1].replace(']', '').toLowerCase()\r\n  }\r\n  static _isTypeValue(val, type, isMayArray = false) {\r\n    if (!type) return false\r\n    let types = type.split('|')\r\n    for (let i = 0; i < types.length; i++) {\r\n      if (this._isType(val, types[i])) return true\r\n    }\r\n    if (isMayArray && Array.isArray(val) && val.length > 0) {\r\n      for (let i = 0; i < val.length; i++) {\r\n        if (!this._isTypeValue(val[i], type, false)) return false\r\n      }\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  static _validOptions({ prefix = 'cps', filterInvalid = true, callback = () => null, listener, related, enable = true, storageType = 'sessionStorage', timeout = 30, refeshEmit = true }) {\r\n    if (!this._isTypeValue(prefix, 'string')) return this._throwError('prefix必须是String类型')\r\n    if (related !== undefined && !this._isTypeValue(related, 'string', true)) return this._throwError('related必须是String|Array<String>类型')\r\n    if (!this._isTypeValue(callback, 'function')) return this._throwError('callback必须是Function类型')\r\n    if (listener && !this._isListener(listener)) return this._throwError('listener必须是Object{key<String>,callback<Function>}|Array<Object>类型')\r\n    if (!this._isTypeValue(enable, 'boolean')) return this._throwError('enable必须是Boolean类型')\r\n    if (storageType !== 'sessionStorage' && storageType !== 'localStorage' && storageType !== 'cookie') this._throwError('storageType只能是sessionStorage|localStorage|cookie')\r\n    if (!(/^[0-9]+$/.test(timeout))) this._throwError('timeout只能是正整数')\r\n    if (!this._isTypeValue(refeshEmit, 'boolean')) return this._throwError('refeshEmit必须是Boolean类型')\r\n    if (!this._isTypeValue(filterInvalid, 'boolean')) return this._throwError('filterInvalid必须是Boolean类型')\r\n    return { prefix, callback, listener, related, enable, storageType, timeout, refeshEmit, filterInvalid }\r\n  }\r\n  static _initStaticData() {\r\n    this._initStatus = 'INIT'\r\n    this._timer = null\r\n    this._winName = 'syf_completed'\r\n  }\r\n  static _initPrefix(prefix) {\r\n    this.prefix = prefix\r\n  }\r\n  static _initCallback(callback) {\r\n    this._handleCallback = callback\r\n  }\r\n  static init(options) {\r\n    if (this._initStatus === 'INIT') return this._throwError('Storage已经初始化!')\r\n    let { prefix, callback, listener, related, enable, storageType, timeout, refeshEmit, filterInvalid } = this._validOptions(options || {})\r\n    this._initStaticData()\r\n    this._timeout = timeout\r\n    this._storageType = storageType\r\n    this._isRefeshEmit = refeshEmit\r\n    this._isFilterInvalid = filterInvalid\r\n    this._initPrefix(prefix)\r\n    this._initCallback(callback)\r\n    this._initRelated(related, enable)\r\n    this._findStorage = this._createFindStorageFn()\r\n    this._setStorageByType = this._createSetStorageByType()\r\n    if (enable) {\r\n      this._initListener(listener)\r\n      this._registerEvent()\r\n      this._questStorage()\r\n    }\r\n  }\r\n  static install(Vue, options = {}) {\r\n    this.init(options)\r\n    let mountKey = options.mountKey && typeof options.mountKey === 'string' ? options.mountKey : '$storage'\r\n    if (Vue.prototype[mountKey]) console.warn(`${mountKey}已存在,原功能将被覆盖!`);\r\n    Vue.prototype[mountKey] = this\r\n  }\r\n}\r\n\r\nexport default Storage"],"sourceRoot":""}